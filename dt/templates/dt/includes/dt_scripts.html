<script>
    // Function to pad leading zeros
    // TODO: move to an overall site-global script?
    Number.prototype.pad = function(size) {
        var s = String(this);
        while (s.length < (size || 2)) {s = "0" + s;}
        return s;
    }
    
    const seconds_inc = 1000;
    const minutes_inc = seconds_inc * 60;
    const hours_inc = minutes_inc * 60;

    // Set the clock values
    function set_seconds() {
        $('#second-{{ id }}').html((new Date().getSeconds()).pad(2));
    }
    function set_minutes() {
        $('#minute-{{ id }}').html((new Date().getMinutes()).pad(2));
    }
    function set_hours() {
        $('#hour-{{ id }}').html((new Date().getHours()).pad(2));
    }

    // Starts the timers for each value
    function start_clock() {
        // Re-initialize all the values
        set_seconds();
        set_minutes();
        set_hours();
        // Set timers
        setInterval(set_seconds, seconds_inc);
        setInterval(set_minutes, minutes_inc);
        setInterval(set_hours, hours_inc);
    }

    // Initialize all the values
    set_seconds();
    set_minutes();
    set_hours();

    var seconds = new Date().getSeconds();
    var ticks = 60 - seconds;
    var secondsInterval = setInterval(function() {
        set_seconds();
        ticks--;
        if (ticks == 0) {
            window.clearInterval(secondsInterval);
            start_clock();
        }
    }, seconds_inc);
</script>